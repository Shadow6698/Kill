-- Criação da GUI
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 250)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
frame.Parent = screenGui

-- Barra preta superior para arrastar
local dragBar = Instance.new("Frame")
dragBar.Size = UDim2.new(1, 0, 0, 25)
dragBar.Position = UDim2.new(0, 0, 0, 0)
dragBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dragBar.Parent = frame

-- Arrastar via dragBar (mobile)
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
	if dragging and input.UserInputType == Enum.UserInputType.Touch then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end

dragBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

dragBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch then
		update(input)
	end
end)

-- Criação dos componentes dentro da GUI
local playerListBox = Instance.new("ScrollingFrame")
playerListBox.Size = UDim2.new(1, 0, 0.6, -25)  -- Ajustado por causa da barra
playerListBox.Position = UDim2.new(0, 0, 0, 25) -- Começa abaixo da barra
playerListBox.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
playerListBox.CanvasSize = UDim2.new(0, 0, 0, 500)
playerListBox.ScrollBarThickness = 4
playerListBox.Parent = frame

local loopGotoButton = Instance.new("TextButton")
loopGotoButton.Size = UDim2.new(1, 0, 0.2, 0)
loopGotoButton.Position = UDim2.new(0, 0, 0.6, 0)
loopGotoButton.Text = "LoopGoto On"
loopGotoButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
loopGotoButton.TextColor3 = Color3.fromRGB(255, 255, 255)
loopGotoButton.TextSize = 12
loopGotoButton.Parent = frame

local loopGotoOffButton = Instance.new("TextButton")
loopGotoOffButton.Size = UDim2.new(1, 0, 0.2, 0)
loopGotoOffButton.Position = UDim2.new(0, 0, 0.8, 0)
loopGotoOffButton.Text = "LoopGoto Off"
loopGotoOffButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
loopGotoOffButton.TextColor3 = Color3.fromRGB(255, 255, 255)
loopGotoOffButton.TextSize = 12
loopGotoOffButton.Parent = frame

-- Resto igual
local playerLooping = nil
local selectedPlayer = nil

local function updatePlayerList()
	for _, child in ipairs(playerListBox:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end

	local players = game.Players:GetPlayers()
	local buttonHeight = 20
	local count = 0

	for _, player in pairs(players) do
		local playerButton = Instance.new("TextButton")
		playerButton.Size = UDim2.new(1, 0, 0, buttonHeight)
		playerButton.Position = UDim2.new(0, 0, 0, count * buttonHeight)
		playerButton.Text = player.Name
		playerButton.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
		playerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		playerButton.TextSize = 12
		playerButton.Parent = playerListBox

		playerButton.MouseButton1Click:Connect(function()
			selectedPlayer = player
			for _, btn in ipairs(playerListBox:GetChildren()) do
				if btn:IsA("TextButton") then
					btn.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
				end
			end
			playerButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
		end)

		count += 1
	end

	playerListBox.CanvasSize = UDim2.new(0, 0, 0, count * buttonHeight)
end

local function teleportToFarlands()
	local farlandsPosition = Vector3.new(500000, 0, 500000)
	game.Players.LocalPlayer.Character:SetPrimaryPartCFrame(CFrame.new(farlandsPosition))
end

local function loopGoto(player)
	if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		while playerLooping == player do
			game.Players.LocalPlayer.Character:SetPrimaryPartCFrame(player.Character.HumanoidRootPart.CFrame)
			local humanoidRootPart = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
			if humanoidRootPart then
				humanoidRootPart.CFrame = humanoidRootPart.CFrame * CFrame.Angles(0, math.rad(30), 0)
			end
			wait(0.1)
		end
	end
end

loopGotoButton.MouseButton1Click:Connect(function()
	if selectedPlayer then
		playerLooping = selectedPlayer
		loopGoto(selectedPlayer)
		loopGotoButton.Text = "LoopGoto Off"
	else
		print("Selecione um jogador da lista.")
	end
end)

loopGotoOffButton.MouseButton1Click:Connect(function()
	playerLooping = nil
	teleportToFarlands()
	loopGotoButton.Text = "LoopGoto On"
end)

-- Atualiza jogadores a cada 3 segundos
while true do
	updatePlayerList()
	wait(3)
end
